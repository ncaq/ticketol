<div id="grade_ticket" data-grade-ticket="<%= @event.grade_ticket.to_json %>"/>
<%= javascript_include_tag 'reservations_form' %>

<% if @event.lottery %>
  <%= simple_form_for(@reservation_form, url: :reservations) do |f| %>
    <%= f.input :grade_id, label: '席グレード', collection: @event.grades.map{|g| [g.name + '(' + g.price.to_s + '円)', g.id]} %>
    <%= f.input :volume, label: '購入数' %>
    <%= f.input :payment_method, label: '支払い方法', collection: Reservation.payment_methods, include_blank: false %>
    <%= f.submit '購入' %>
  <% end %>
<% else %>
  <%= simple_form_for(@reservation_form, url: :reservations) do |f| %>
    <%= select :grade, :id, @event.grades.map{|g| [g.name + '(' + g.price.to_s + '円)', g.id]}, label: '席グレード' %>
    <%= f.input :tickets_id, collection: @event.grade_ticket.first[:tickets], include_blank: false,
    :input_html => { :id => '', :name => 'reservation_form_disable_lottery[tickets_id][1]', :class => 'tickets_id'} %>
    <%= f.button :button, 'チケット追加', type: 'button', class: 'addTicket' %>
    <%= f.input :payment_method, label: '支払い方法', collection: Reservation.payment_methods, include_blank: false %>
    <%= f.submit '購入' %>
  <% end %>
<% end %>
